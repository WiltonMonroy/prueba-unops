create schema unops;

CREATE TABLE UNOPS.ESTADO (
	ID_ESTADO INT IDENTITY,
	NOMBRE VARCHAR(200),
	PRIMARY KEY (ID_ESTADO)
);

CREATE TABLE UNOPS.PERFIL(
	ID_PERFIL INT IDENTITY,
	NOMBRE VARCHAR(200),
	PRIMARY KEY(ID_PERFIL)
);

CREATE TABLE UNOPS.USUARIO(
	ID_USUARIO INT IDENTITY,
	NOMBRE VARCHAR(200),
	ID_PERFIL INT,
	PRIMARY KEY(ID_USUARIO)
);

ALTER TABLE UNOPS.USUARIO
ADD CONSTRAINT FK_PERFIL_USUARIO
  FOREIGN KEY (ID_PERFIL)
  REFERENCES UNOPS.PERFIL(ID_PERFIL);

CREATE TABLE UNOPS.CLASIFICACION(
	ID_CLASIFICACION INT IDENTITY,
	NOMBRE VARCHAR(200),
	PRIMARY KEY(ID_CLASIFICACION)
);


CREATE TABLE UNOPS.PRIORIDAD(
	ID_PRIORIDAD INT IDENTITY,
	NOMBRE VARCHAR(200),
	PRIMARY KEY(ID_PRIORIDAD)
);

CREATE TABLE UNOPS.INCIDENCIA(
	ID_INCIDENCIA INT IDENTITY,
	ID_USUARIO INT,
	ID_CLASIFICACION INT,
	ID_PRIORIDAD INT,
	ID_ESTADO INT,
	ASUNTO VARCHAR(200),
	HORAS VARCHAR(10)
	PRIMARY KEY(ID_PRIORIDAD)
);

ALTER TABLE UNOPS.INCIDENCIA
ADD CONSTRAINT FK_INCI_USUARIO
  FOREIGN KEY (ID_USUARIO)
  REFERENCES UNOPS.USUARIO(ID_USUARIO);
  
 ALTER TABLE UNOPS.INCIDENCIA
ADD CONSTRAINT FK_INCI_CLASI
  FOREIGN KEY (ID_CLASIFICACION)
  REFERENCES UNOPS.CLASIFICACION(ID_CLASIFICACION);
  
  ALTER TABLE UNOPS.INCIDENCIA
ADD CONSTRAINT FK_INCI_PRIORI
  FOREIGN KEY (ID_PRIORIDAD)
  REFERENCES UNOPS.PRIORIDAD(ID_PRIORIDAD);
  
 ALTER TABLE UNOPS.INCIDENCIA
ADD CONSTRAINT FK_INCI_ESTADO
  FOREIGN KEY (ID_ESTADO)
  REFERENCES UNOPS.ESTADO(ID_ESTADO);